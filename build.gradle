apply plugin: 'eclipse'
apply plugin: 'java'
apply plugin: 'jacoco'

group = 'org.tfa.jsonpatch'
version = '1.0.0-SNAPSHOT'

buildscript {
    dependencies {
        classpath 'org.jacoco:org.jacoco.agent:0.7.2.201409121644'
    }

    repositories {
        mavenCentral()
    }
}

repositories {
    mavenCentral()
    maven { url 'http://archiva.prod.tfanet.org/archiva/repository/tfa-central' }
}

configurations {
    provided
}

sourceSets {
    main.compileClasspath += configurations.provided
    test.compileClasspath += configurations.provided
    test.runtimeClasspath += configurations.provided
}

eclipse {
    pathVariables 'GRADLE_USER_HOME': gradle.gradleUserHomeDir
}
eclipse.classpath.plusConfigurations += configurations.provided

dependencies {
	compile 'log4j:log4j:1.2.16'
	compile 'org.codehaus.jackson:jackson-core-asl:1.9.13'
    compile 'org.codehaus.jackson:jackson-mapper-asl:1.9.13'
    
	testCompile 'junit:junit:4.11'
}

test {
    jacoco {
        excludes = ['org.junit.*']
    }

    // GRADLE-2859
    systemProperties['user.dir'] = workingDir
}
